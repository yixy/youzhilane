

USE是用于进行性能分析的一种方法。USE方法（utilization、saturation、errors）用于识别系统瓶颈，即对于所有的资源，查看它的使用率、饱和度和错误。

## 硬件资源 ##

CPU

* 使用率：单cPU使用率或系统级均值
* 饱和度：分配队列长度(又名运行队列长度)
* 错误：例如，可修正的CPU缓存ECC事件，可修正的CPU故障（操作系统和硬件支持）

内存

* 使用率：可用空闲内存(系统级）
* 饱和度：匿名换页或线程换出(页面扫描是另一个指标)，或者OOM事件
* 错误：失败的malloc()(虽然这通常于虚拟内存耗尽，并非物理内存)

网络接口

* 使用率：接收吞吐量最大带宽，传输吞吐量/最大带宽
* 饱和度：与饱和度相关的网络接口或操作系统错误。例如， Linux的 overrun和 Solaris的nocanput

存储设备IO

* 使用率：设备繁忙百分比
* 饱和度：等待队列长度
* 错误：设备错误（硬错误、软错误）

存储控制器

* 使用率：取决于控制器，针对当前活动可能有最大
* IOPS或吞吐量可供检查

CPU互联

* 使用率：每个端口的吞吐量最大带宽(CPU性能计数
器

内存互联

* 饱和度：内存停滞周期数，偏高的平均指令周期数
(CPU性能计数器)

IO互联

* 使用率：总线吞吐量最大带宽(可能你的硬件上有性
* 计数器，例如， Intel的“非核心“事件

## 软件资源 ##

某些软件资源的检测方式可能相似。这里指的是软件组件，而不是整个应用程序，示例如

* 互斥锁：锁被持有的时间是使用时间，饱和度指的是有线程排队在等锁。
* 线程池：线程忙于处理工作的时间是使用时间，饱和度指的是等待线程池服务的请求数目。
* 进程/线程容量：系统的进程或线程的总数是有上限的，当前的使用数目是使用率，等待分配认为是饱和度，错误是分配失败(例如，“ cannot fork")
* 文件描述符容量：同进程/线程容量一样，只不过针对的是文件描述符。

## 使用建议 ##

对于使用上述这些指标类型，这里有一些总体的建议。

* 使用率：100%的使用率通常是瓶颈的信号(检查饱和度并确认其影响)。使用率超过60%可能会是问题，基于以下理由：时间间隔的均值，可能掩盖了100%使用率的短期爆发，另外，一些资源，诸如硬盘(不是CPU)，通常在操作期间是不能被中断的，即使做的是优先级较高的工作。随着使用率的上升，排队延时会变得更频繁和明显。
* 饱和度：任何程度的饱和都是问题(非零)。饱和程度可以用排队长度或者排队所花的时间来度量。
* 错误：错误都是值得研究的，尤其是随着错误增加性能会变差的那些错误。

## 相关链接 ##

《性能之巅》，Brandan Gregg