
# 性能分析(2)——系统基本信息 #

## 1. 查看硬件信息 ##

查看PCI硬件设备信息。

```
lspci -v
```

查看CPU信息。物理CPU就是实实在在插在主机上看得见摸得着那块CPU硬件。一块物理CPU上可能有多个能够并行处理数据的芯片组（内核），也就是说一个物理CPU上可能会有多个核心。physicalid是物理CPU的唯一标识符，processor是逻辑CPU的唯一标识符，siblings表示同一个物理CPU中逻辑CPU的数量。coreid是每个内核的唯一标识符，cpu cores表示一个物理CPU中的内核数量。需要注意，以上都是操作系统认为的数据，有些操作系统版本会把启动了（或者说支持）超线程的处理器的线程数量加倍。

```
cat /proc/cpuinfo
$ grep 'model name' /proc/cpuinfo | wc -l

```

查看系统内存信息。

```
cat /proc/meminfo
```

查看磁盘分区信息。

```
fdisk -l
```

## 2. 查看操作系统信息 ##

打印系统信息。

```
uname -a
```

在 /etc 目录中有一个文件可以查看当前系统的版本信息，但是在不同的发行版上，不但使用的文件不同，文件的内容和格式也完全不同。为了解决这个问题，LSB 规范中增加了对 lsb_release 接口及其输出格式的定义：lsb_release 的功能是打印与发行版本相关的信息。

LSB（Linux标准规范，Linux Standard Base）是一个在Linux基金会结构下对Linux发行版的联合项目。LSB 以 POSIX 和 SUS 标准为基础，并对其他领域（例如图形）中源代码的一些标准进行了扩充，还增加了对二进制可执行文件格式规范的定义，从而试图确保 Linux 上应用程序源码和二进制文件的兼容性。

```
lsb_release -a
```

## 3. 查看系统负载——uptime ##

uptime命令能够打印系统总共运行了多长时间和系统的平均负载。uptime命令可以显示的信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的1分钟、5分钟和15分钟内的平均负载。

```
uptime
```

* System Load指当前正在被CPU执行和等待CPU执行的进程数目总和，是反映系统忙闲程度的重要指标。
* loadaverage：指CPU平均负载，系统平均负载是指在特定时间间隔内运行队列中的平均进程数。

对于两核CPU来说，若loadaverage为6，则单个内核的负载为3。一般，如果每个内核的当前活动进程数不大于3，则说明系统性能是良好的，如果每个内核的活动进程数大于5，则说明系统性能可能有严重问题。

## 4. 查看系统进程资源占用 ##

top命令显示系统中各个进程的资源占用状况。

```
top
```

第一行，任务队列信息，同 uptime 命令的执行结果。
第二行，Tasks — 任务（进程）信息。
第三行，cpu状态信息，具体属性说明如下。

* 5.9% us — 用户空间占用CPU的百分比。
* 3.4% sy — 内核空间占用CPU的百分比。
* 0.0% ni — 改变过优先级的进程占用CPU的百分比
* 90.4% id — 空闲CPU百分比
* 0.0% wa — IO等待占用CPU的百分比
* 0.0% hi — 硬中断（Hardware IRQ）占用CPU的百分比
* 0.2% si — 软中断（Software Interrupts）占用CPU的百分比
* 0.0% st - 当 hypervisor 服务另一个虚拟处理器的时候，虚拟 CPU 等待实际 CPU 的时间占总时间的百分比。

第四行内存状态信息。
第五行swap分区信息。

注意，第四行中使用中的内存总量（used）指的是现在系统内核控制的内存数，空闲内存总量（free）是内核还未纳入其管控范围的数量。纳入内核管理的内存不见得都在使用中，还包括过去使用过的现在可以被重复利用的内存，内核并不把这些可被重新使用的内存交还到free中去，因此在linux上free内存会越来越少，但不用为此担心。

top交互命令：

* P：默认进入top时，各进程是按照CPU的占用量来排序的。
* M：根据驻留内存大小进行排序。
* T：根据时间/累计时间进行排序。
* 1：监控每个逻辑CPU的状况。

