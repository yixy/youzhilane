# 字符串模式匹配算法——KMP #

## 1. 原理 ##

![kmp原理1.png](http://sweeat.me/kmp原理1.png)

当原串与模式串发生不匹配时，在比较指针左边的子串中寻找完全匹配的前后缀，前后缀需要满足以下限制：

* 寻找长度最长的前后缀
* 但前后缀的长度小于该子串的长度

![kmp原理2.png](http://sweeat.me/kmp原理2.png)

模式串需要移动到后缀的第一个字符处，然后原串和模式串的匹配继续从上次检测到不匹配的地方开始进行比较，可以看到比较指针不存在回溯。

## 2. next数组 ##

next数组生成逻辑：

![kmp-next数组.png](http://sweeat.me/kmp-next数组.png)

## 3. 时间复杂度 ##

朴素字符串模式匹配算法时间复杂度：O(n*m)
kmp算法的时间复杂度：O(n+m)

注意，虽然朴素的字符串模式匹配算法时间复杂度时O(n*m)，但在一般情况下，其实际的执行时间近似于O(n+m)，因此至今仍被使用。kmp算法仅当模式串与主串之间存在许多“部分匹配”的情况下才显得比朴素算法快得多。但是kmp的最大特点是比较指针不需要回溯，整个匹配过程中，对主串仅需要从头至尾扫描一遍，这对处理从外设输入的庞大文件很有效，可以边读边匹配。