# 树表查找——二叉排序树 #

如果希望拥有与折半查找同样的查找效率O(logn)，并且对频繁的插入删除操作不需要大量元素移动，可以使用平衡二叉树。

* 时间复杂度最佳情况是 O(log­n)，而最坏情况是 O(n)。
* 空间复杂度是O(n)，因为有指针。

在介绍平衡二叉树前先介绍二叉排序树。

## 1. 二叉排序树的定义 ##

二叉排序树（Binary Search Tree，又叫二叉查找树、二叉搜索树），或是空树，或者满足如下性质：

* 若其左子树为非空，则左子树上所有结点的值均小于根结点的值
* 若其右子树为非空，则左子树上所有结点的值均大于等于根结点的值
* 其左右子树本身又是一棵二叉排序树

按二叉排序树的定义，中序遍历二叉排序树，得到的结果是递增有序的。

## 2. 二叉排序树的查找 ##

* 若查找关键字与根结点匹配，则查找成功
* 若关键字小于根结点，则查其左子树
* 若关键字大于根结点，则查其右子树
* 左右子树查找方式类似

注意，BST树比较的关键字次数是此结点的层数，所以其最坏查找次数是树的深度。其平均查找长度与树的形态有关，树的高度越高，平均查找长度越长，最佳情况是 O(log­n)，而最坏情况是 O(n)。

> 当 BST 树中的节点以扇形结构散开时，对它的插入、删除和查找操作最优的情况下可以达到亚线性的运行时间 O(log2n)。因为当在 BST 中查找一个节点时，每一步比较操作后都会将节点的数量减少一半。尽管如此，如果拓扑结构呈线性的样子，运行时间就会退减到线性时间 O(n)。因为每一步比较操作后还是需要逐个比较其余的节点。也就是说，在这种情况下，在 BST 中查找节点与在数组（Array）中查找就基本类似了。

如何提高形态不均衡的二叉排序树的查找效率？

做平衡化处理，即尽量让二叉树的形状均衡。

## 二叉排序树结点的插入和删除 ##

一个无序序列可以通过构造二叉排序树而变成一个有序序列，构造树的过程就是对无序序列排序的过程。

* 插入的结点均为叶子结点，故无需移动其他结点，相当于在有序序列上插入元素而无需移动其他元素。

删除元素应避免树的高度增加。

* 叶子结点直接删除
* 被删除结点只有左子树或者只有右子树，则用其左子树或右子树替换它
* 被删除结点既有左子树又有右子树：1）以其中序前趋结点值替换之（值替换），然后再删除该前趋结点。某结点的前趋是其左子树中最大的结点；2）以其中序后继结点值替换之（值替换），然后再删除该后继结点。某结点的后继是其右子树中最小的结点；