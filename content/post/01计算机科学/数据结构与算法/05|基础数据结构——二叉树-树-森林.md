# 基础数据结构——二叉树-树-森林 #

## 1. 二叉树 ##

二叉树( Binary Tree)是一种树型结构，它的特点是每个结点至多只有两棵子树(即二叉树中不存在度大于2的结点)，并且，二叉树的子树有左右之分，其次序不能任意颠倒。

* 二叉树：树的度小于等于2的有序树。

二叉树具有下列重要特性：

* 在二叉树的第i层上至多有2^(i-1)个结点（i≥1）利用归纳法容易证得此性质。
* 深度为k的二叉树至多有2^k-1个结点（k≥1）
* 对任意二叉树，若其叶子结点树为n0，度为2的结点数为n2，则n0=n2+1。

> 等差数列前n项和：n(a1+an)/2
> 等比数列前n项和：a1(1-q^n)/(1-q)
> 
> 设二叉树中度为0的结点为n0，度为1的结点为n1，度为2的结点为n2。
> 分支数量B=n0+n1+n2-1=2*n2+n1，按结点上连分支计算和结点下连分支计算。

## 2. 满二叉树和完全二叉树 ##

* 满二叉树：深度为k且有2^k-1个结点的二叉树。

可以对满二叉树的结点进行连续编号，约定编号从根结点起，自上而下，从左至右，由此可以引出完全二叉树的定义。注意，不同的资料对完全二叉树的定义可能不同。

* 完全二叉树：深度为 k有 n个节点的二叉树，当且仅当其中的每一节点，都可以和同样深度 k的满二叉树，序号为1到n的节点一对一对应时，称为完全二叉树。

完全二叉树的性质：

* 具有n个结点的完全二叉树深度为|logn|+1。（log底为2）
* 含n个结点的完全二叉树，其序号为i的结点：1）若i=1，则根是i；若i>1，则父亲结点是`m[i/2]`。（`m[]`向下取整，`M[]`向上取整）；2）若2i>n，则结点i无左孩子（i为叶子结点），否则其左孩子为2i；3）若2i+1>n，则结点i无右孩子，否则其右孩子结点是2i+1。

## 3. 二叉树的存储 ##

* 顺序存储结构：结点按序号顺序存储，无结点需要特殊标识占位。适合完全二叉树，对于插入、删除结点效率很低。
* 二叉链表：data,leftchild指针,rightchild指针
* 三叉链表：data,leftchild指针,rightchild指针,parent指针

## 4. 遍历二叉树和线索二叉树 ##

遍历二叉树问题是指按某个路径巡访二叉树中每个结点，并保证每个结点仅被访问一次。一般采用递归方式实现，按对每个子树的根结点遍历的先后顺序有以下几种方式。

* 前（根）序遍历：时间复杂度O(n)
* 中（根）序遍历：时间复杂度O(n)
* 后（根）序遍历：时间复杂度O(n)

实际上，遍历二叉树的其实就是以一定规则将二叉树中的结点排列成一个线性序列，得到二叉树中结点的先序序列、中序序列或后序序列。这是一个对非线性结构进行线性化的操作。这些线性序列中的每一个元素都有且仅有一个前驱结点和后继结点。

当我们希望得到二叉树中某一个结点的前驱或者后继结点时，顺序存储结构的二叉树是可以很好得到的，但是对于二叉链表则是无法直接得到的，只能通过遍历一次二叉树得到。每当涉及到求解前驱或者后继就需要将二叉链表遍历一次，非常不方便。

观察二叉树的结构，我们发现指针域并没有充分的利用，有很多“NULL”，也就是存在很多空指针。
对于一个有n个结点的二叉链表，每个节点都有指向左右孩子的两个指针域，一共有2n个指针域。而n个结点的二叉树又有n-1条分支线数(除了头结点，每一条分支都指向一个结点)，也就是存在2n-(n-1)=n+1个空指针域。这些指针域只是白白的浪费空间。因此, 可以用空链域来存放结点的前驱和后继。线索二叉树就是利用n+1个空链域来存放结点的前驱和后继结点的信息。

* 指向前驱和后继的指针叫做线索 ，加上线索的二叉树就称之为线索二叉树。

在每一个结点都增设两个标志域LTag和RTag，它们只存放0或1的布尔型变量，占用的空间很小。LTag为0是指向该结点的左孩子，为1时指向该结点的前驱。RTag为0是指向该结点的右孩子，为1时指向该结点的后继。

在中序线索二叉树上遍历二叉树，不需要递归，而且虽然时间复杂度仍为O(n)，但常数因子要比递归遍历算法小。若程序中所用二叉链表需要经常遍历或查找结点在遍历序列中的前驱和后继，则应采用线索链表作存储结构。

## 5. 树的存储结构 ##

* 双亲表示法：以一组连续空间（顺序表）存储树的结点，每个结点中附设一个指示器指示其双亲结点在顺序表中的位置。注意，这种方式求结点的孩子时需要遍历整个结构。

![树的双亲表示法.png](http://sweeat.me/树的双亲表示法.png)

* 孩子表示法：以一组连续空间（顺序表）存储树的结点，每个结点中附设一个指向单链表的指针，该单链表中存储该结点的孩子结点。注意，这种方式求结点的父亲时需要遍历整个结构。

![树的孩子表示法.png](http://sweeat.me/树的孩子表示法.png)

* 双亲孩子表示法：以一组连续空间（顺序表）存储树的结点，每个结点中附设一个指示器指示其双亲结点在顺序表中的位置，同时附设一个指向单链表的指针，该单链表中存储该结点的孩子结点。

![树的双亲孩子表示法.png](http://sweeat.me/树的双亲孩子表示法.png)

* 树的二叉链表表示法：链表中结点的两个指针分别指向该结点的第一个孩子结点和下一个兄弟结点。这样可以以二叉链表作为媒介导出树与二叉树之间的对应关系。

![树的二叉链表表示法.png](http://sweeat.me/树的二叉链表表示法.png)

## 6. 森林的存储结构 ##

从树的二叉链表表示定义可知，任何一棵和树对应的二叉树，其右子树必空。若把森林中第二棵树的根结点看成是第一棵树的根结点的兄弟，则同样可导出森林和二叉树的对应关系。

## 7. 树和森林的遍历 ##

前序、中序、后序遍历。

当以二叉链表作为存储结构时，可以借用二叉树的先序遍历和中序遍历算法实现。
