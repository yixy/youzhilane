# OS笔记(8)——内存动态分配算法 #

在动态分配内存时，操作系统必须对其进行管理。一般而言，有两种方式跟踪内存使用情况，位图和空闲链表。

## 1. 使用位图的存储管理 ##

* 位图：顾名思义，可以看成是一个bit表。内存可能被划分为几个字或几千字节的分配单元，每个分配单元对应位图中的一位，0表示空闲，1表示占用。

使用位图时的主要问题是，在决定分配k个单元时，系统必须对位图进行搜索，在其中找出有k个值连续为0的串，这是一个耗时的操作（因为位图中该串可能跨越字的边界）。

## 2. 使用链表的存储管理 ##

使用链表的存储管理需要维护一个记录已分配内存和空闲内存的链表。

* 已分配内存链表：链表中一个节点包含一个进程所占据的内存区。
* 空闲内存链表：链表中一个节点包含两个进程之间的一个空闲区。

使用链表数据结构时，常见的内存分配算法如下，仿真程序试验表明，后三种算法并不比首次适配算法更优秀。

* 首次适配算法：从头开始搜索链表，直到找到足够大的空闲区，除非空闲区与待分配空间大小一样，否则将该空闲区分为两部分，一部分供进程使用，另一部分形成新的空闲区。
* 下次适配算法：与首次适配算法方式基本相同。区别在于，每次找到合适的空闲区时都记录当时的位置，以便在下次寻找空闲区时从该位置开始搜索。（bays 1977 的仿真程序证明下次适配算法性能略低于首次适配算法）
* 最佳适配算法：每次搜索整个链表，找出能够分配的最小的空闲区进行分配。
* 最差适配算法：每次搜索整个链表，找出能够分配的最大的空闲区进行分配。
