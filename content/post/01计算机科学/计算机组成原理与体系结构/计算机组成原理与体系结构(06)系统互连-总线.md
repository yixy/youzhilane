
## 1. 总线的概念 ##

计算机系统的主要部件（CPU、主存、IO设备）为了交换数据和控制信号，需要进行互连。最流行的互连方式是使用多条线路组成的共享系统总线。当今系统中，通常是采用层次式总线，以改善性能。

总线（bus）是连接两个或多个设备的通信通路。总线的关键特征是共享传输介质，每次只能有一个设备成功地利用总线发送数据。

CPU要想进行数据的读写，必须和外部器件（芯片）进行下面地址、控制和数据3类信息的交互。计算机中CPU和其他芯片进行信息交互时依赖专门连接CPU和其他芯片的导线。总线就是这些导线的集合，根据传递信息的不同，总线从逻辑上又分为地址总线、控制总线和数据总线。

* 地址信息：存储单元的地址。（CPU通过地址总线指定存储单元。）
* 数据信息：读或写的数据。（CPU通过数据总线和外部器件进行数据交互。）
* 控制信息：控制地址总线和数据总线的使用，读或写的命令及时序信号。（CPU通过控制总线控制外部器件。）

> 具体实现上，总线系统可以是分时复用的，也可以真多分成三种专用的总线。前者节省了空间和成本，但是控制电路略复杂，且具有性能降低的潜在可能。

数据总线宽度是决定系统总体性能的关键因素。

一个CPU有N根地址线，则该CPU的地址总线宽度为N，代表该CPU最多可以寻址2^N个内存单元。一个CPU有N根数据线，则该CPU的数据总线宽度为N，代表该CPU一次可以传送N位二进制数据。控制总线是一些不同的控制线的集合，控制总线的宽度决定了CPU对外部器件的控制能力，例如内存读写明了是由几根控制线综合发出的，其中“读信号输出”控制线负责CPU向外传送读信号，“写信号输出”控制线负责传送写信号。

> 8088CPU数据总线宽度为8，8086CPU数据总线宽度为16。


> 衡量微处理器的标准：数据总线宽度或处理器位数。

字（word）：没有关于术语word的统一定义。通常，字是字节或位的有序组合，是在计算机中存储、传送和操作的正常信息单位。一般而言，若某一处理器具有定长指令集，则指令长度等于字长。

## 2. 多总线层次结构 ##

如果大量设备连接到总线上，性能就会下降。主要原因是，总线上连接的设备越多，传输延时就越大。另外，当聚集的传送请求接近总线容量时，总线便会成为瓶颈。因此，大多数计算机系统在体系结构中都选择使用多总线结构。

高性能总线结构图（P58）

这种安排的好处是，高速总线使高需求的设备与处理器有更紧密的集成，同时又独立于处理器。于是，不同的处理器和高速总线速度及信号线定义都可以兼容。处理器结构的变化不影响高速总线，反之亦然。

## 3. 总线的设计要素 ##

* 仲裁：以集中或分布式方式控制来裁决是否允许把信号发送到总线上
* 时序：总线上的信号是与中央时钟同步，还是基于最近传送事件的异步传送
* 宽度：总线条数

由于总线上每次只有一个器件能够成功地发送，因此需要某种仲裁方法。各种仲裁方法可以大致分为“集中式”和“分布式”两类。在集中式的方法中，一个称为总线控制器或仲裁器的硬件负责分配总线时间。这个设备可以是独立的模块，也可以是CPU的一部分。在分布式的方法中，没有中央控制器，而是在每个模块中包含访问控制逻辑，这些模块共同作用，分享总线。

对于同步时序，总线上的事件发生由时钟决定。总线中包含时钟信号线，他传送相同长度的由0、1交替的规则信号指定的时钟序列。一次传送被称为时钟周期或总线周期，它定义了一个时间槽。总线上其他所有设备都能读取时钟线，而且所有的事件都在时钟周期的开始时发生。
对于异步时序来说，总线上一个事件的发生取决于前一事件的发生。

